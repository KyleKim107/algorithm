{% tabs %}
{% tab title='CF_1527C.md' %}

> Question

* weight of a sequence is defined as the number of unordered pairs of indexes (ğ‘–,ğ‘—) (here ğ‘–<ğ‘—) with same value (ğ‘ğ‘–=ğ‘ğ‘—)
* given a sequence ğ‘ of ğ‘› integers. Print the sum of the weight of all subsegments of ğ‘

```txt
Input:
2
4
1 2 1 1
4
1 2 3 4

Output:
6
0
```

> Solution

* unordered pairs is accumulated as in fibonacci
* Including current position * left, right padding
* Accumulate score in dp for each number

{% endtab %}
{% tab title='CF_1527C.py' %}

```py
for _ in range(int(input())):
  N = int(input())
  li = list(map(int, input().split()))
  dp, ans = {}, 0
  for n, i in enumerate(li):
    if n not in dp: dp[n] = 0
    ans += dp[n] * (N - i)
    dp[n] += i + 1
  print(ans)
```

{% endtab %}
{% endtabs %}
